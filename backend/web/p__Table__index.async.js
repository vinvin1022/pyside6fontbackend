"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[311],{39228:function(ae,I,r){r.r(I),r.d(I,{default:function(){return he}});var $=r(5574),T=r.n($),C=r(15009),s=r.n(C),j=r(97857),P=r.n(j),A=r(99289),f=r.n(A),z=r(18580),L=r(6110),M=r(87616),V=r(2236),K=r(35351),h=r(57434),W=r(96074),R=r(83622),Y=r(85265),S=r(67294),G=r(28248),e=r(85893),t=function(a){var l=a.modalVisible,i=a.onCancel;return(0,e.jsx)(G.Z,{destroyOnClose:!0,title:"\u65B0\u5EFA",width:420,open:l,onCancel:function(){return i()},footer:null,children:a.children})},y=t,p=r(45029),d=r(5966),g=r(90672),E=r(64317),te=r(86615),ue=r(22452),se=function(a){return(0,e.jsxs)(p.L0,{stepsProps:{size:"small"},stepsFormRender:function(i,F){return(0,e.jsx)(G.Z,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:"\u89C4\u5219\u914D\u7F6E",open:a.updateModalVisible,footer:F,onCancel:function(){return a.onCancel()},children:i})},onFinish:a.onSubmit,children:[(0,e.jsxs)(p.L0.StepForm,{initialValues:{name:a.values.name,nickName:a.values.nickName},title:"\u57FA\u672C\u4FE1\u606F",children:[(0,e.jsx)(d.Z,{width:"md",name:"name",label:"\u89C4\u5219\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C4\u5219\u540D\u79F0\uFF01"}]}),(0,e.jsx)(g.Z,{name:"desc",width:"md",label:"\u89C4\u5219\u63CF\u8FF0",placeholder:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26\u7684\u89C4\u5219\u63CF\u8FF0\uFF01",min:5}]})]}),(0,e.jsxs)(p.L0.StepForm,{initialValues:{target:"0",template:"0"},title:"\u914D\u7F6E\u89C4\u5219\u5C5E\u6027",children:[(0,e.jsx)(E.Z,{width:"md",name:"target",label:"\u76D1\u63A7\u5BF9\u8C61",valueEnum:{0:"\u8868\u4E00",1:"\u8868\u4E8C"}}),(0,e.jsx)(E.Z,{width:"md",name:"template",label:"\u89C4\u5219\u6A21\u677F",valueEnum:{0:"\u89C4\u5219\u6A21\u677F\u4E00",1:"\u89C4\u5219\u6A21\u677F\u4E8C"}}),(0,e.jsx)(te.Z.Group,{name:"type",width:"md",label:"\u89C4\u5219\u7C7B\u578B",options:[{value:"0",label:"\u5F3A"},{value:"1",label:"\u5F31"}]})]}),(0,e.jsxs)(p.L0.StepForm,{initialValues:{type:"1",frequency:"month"},title:"\u8BBE\u5B9A\u8C03\u5EA6\u5468\u671F",children:[(0,e.jsx)(ue.Z,{name:"time",label:"\u5F00\u59CB\u65F6\u95F4",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5F00\u59CB\u65F6\u95F4\uFF01"}]}),(0,e.jsx)(E.Z,{name:"frequency",label:"\u76D1\u63A7\u5BF9\u8C61",width:"xs",valueEnum:{month:"\u6708",week:"\u5468"}})]})]})},le=se,N=z.Z.UserController,ie=N.addUser,oe=N.queryUserList,de=N.deleteUser,ce=N.modifyUser,me=function(){var w=f()(s()().mark(function a(l){var i;return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=h.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),n.prev=1,n.next=4,ie(P()({},l));case 4:return i(),h.ZP.success("\u6DFB\u52A0\u6210\u529F"),n.abrupt("return",!0);case 9:return n.prev=9,n.t0=n.catch(1),i(),h.ZP.error("\u6DFB\u52A0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),n.abrupt("return",!1);case 14:case"end":return n.stop()}},a,null,[[1,9]])}));return function(l){return w.apply(this,arguments)}}(),ve=function(){var w=f()(s()().mark(function a(l){var i;return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=h.ZP.loading("\u6B63\u5728\u914D\u7F6E"),n.prev=1,n.next=4,ce({userId:l.id||""},{name:l.name||"",nickName:l.nickName||"",email:l.email||""});case 4:return i(),h.ZP.success("\u914D\u7F6E\u6210\u529F"),n.abrupt("return",!0);case 9:return n.prev=9,n.t0=n.catch(1),i(),h.ZP.error("\u914D\u7F6E\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),n.abrupt("return",!1);case 14:case"end":return n.stop()}},a,null,[[1,9]])}));return function(l){return w.apply(this,arguments)}}(),fe=function(){var w=f()(s()().mark(function a(l){var i,F;return s()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(i=h.ZP.loading("\u6B63\u5728\u5220\u9664"),l){c.next=3;break}return c.abrupt("return",!0);case 3:return c.prev=3,c.next=6,de({userId:((F=l.find(function(H){return H.id}))===null||F===void 0?void 0:F.id)||""});case 6:return i(),h.ZP.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"),c.abrupt("return",!0);case 11:return c.prev=11,c.t0=c.catch(3),i(),h.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),c.abrupt("return",!1);case 16:case"end":return c.stop()}},a,null,[[3,11]])}));return function(l){return w.apply(this,arguments)}}(),pe=function(){var a=(0,S.useState)(!1),l=T()(a,2),i=l[0],F=l[1],n=(0,S.useState)(!1),c=T()(n,2),H=c[0],J=c[1],ye=(0,S.useState)({}),q=T()(ye,2),Q=q[0],X=q[1],b=(0,S.useRef)(),Ce=(0,S.useState)(),_=T()(Ce,2),U=_[0],ge=_[1],Fe=(0,S.useState)([]),ee=T()(Fe,2),D=ee[0],re=ee[1],k=[{title:"\u540D\u79F0",dataIndex:"name",tip:"\u540D\u79F0\u662F\u552F\u4E00\u7684 key",formItemProps:{rules:[{required:!0,message:"\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u6635\u79F0",dataIndex:"nickName",valueType:"text"},{title:"\u6027\u522B",dataIndex:"gender",hideInForm:!0,valueEnum:{0:{text:"\u7537",status:"MALE"},1:{text:"\u5973",status:"FEMALE"}}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(o,u){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("a",{onClick:function(){J(!0),X(u)},children:"\u914D\u7F6E"}),(0,e.jsx)(W.Z,{type:"vertical"}),(0,e.jsx)("a",{href:"",children:"\u8BA2\u9605\u8B66\u62A5"})]})}}];return(0,e.jsxs)(L._z,{header:{title:"CRUD \u793A\u4F8B"},children:[(0,e.jsx)(M.Z,{headerTitle:"\u67E5\u8BE2\u8868\u683C",actionRef:b,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[(0,e.jsx)(R.ZP,{type:"primary",onClick:function(){return F(!0)},children:"\u65B0\u5EFA"},"1")]},request:function(){var m=f()(s()().mark(function o(u,Z,x){var v,O,ne;return s()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,oe(P()(P()({},u),{},{sorter:Z,filter:x}),{baseURL:"http://127.0.0.1:5000"});case 2:return v=B.sent,O=v.data,ne=v.success,B.abrupt("return",{data:(O==null?void 0:O.list)||[],success:ne});case 6:case"end":return B.stop()}},o)}));return function(o,u,Z){return m.apply(this,arguments)}}(),columns:k,rowSelection:{onChange:function(o,u){return re(u)}}}),(D==null?void 0:D.length)>0&&(0,e.jsxs)(V.S,{extra:(0,e.jsxs)("div",{children:["\u5DF2\u9009\u62E9"," ",(0,e.jsx)("a",{style:{fontWeight:600},children:D.length})," ","\u9879\xA0\xA0"]}),children:[(0,e.jsx)(R.ZP,{onClick:f()(s()().mark(function m(){var o,u;return s()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,fe(D);case 2:re([]),(o=b.current)===null||o===void 0||(u=o.reloadAndRest)===null||u===void 0||u.call(o);case 4:case"end":return x.stop()}},m)})),children:"\u6279\u91CF\u5220\u9664"}),(0,e.jsx)(R.ZP,{type:"primary",children:"\u6279\u91CF\u5BA1\u6279"})]}),(0,e.jsx)(y,{onCancel:function(){return F(!1)},modalVisible:i,children:(0,e.jsx)(M.Z,{onSubmit:function(){var m=f()(s()().mark(function o(u){var Z;return s()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,me(u);case 2:Z=v.sent,Z&&(F(!1),b.current&&b.current.reload());case 4:case"end":return v.stop()}},o)}));return function(o){return m.apply(this,arguments)}}(),rowKey:"id",type:"form",columns:k})}),Q&&Object.keys(Q).length?(0,e.jsx)(le,{onSubmit:function(){var m=f()(s()().mark(function o(u){var Z;return s()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,ve(u);case 2:Z=v.sent,Z&&(J(!1),X({}),b.current&&b.current.reload());case 4:case"end":return v.stop()}},o)}));return function(o){return m.apply(this,arguments)}}(),onCancel:function(){J(!1),X({})},updateModalVisible:H,values:Q}):null,(0,e.jsx)(Y.Z,{width:600,open:!!U,onClose:function(){ge(void 0)},closable:!1,children:(U==null?void 0:U.name)&&(0,e.jsx)(K.vY,{column:2,title:U==null?void 0:U.name,request:f()(s()().mark(function m(){return s()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",{data:U||{}});case 1:case"end":return u.stop()}},m)})),params:{id:U==null?void 0:U.name},columns:k})})]})},he=pe},18580:function(ae,I,r){r.d(I,{Z:function(){return G}});var $={};r.r($),r.d($,{addUser:function(){return M},deleteUser:function(){return Y},getUserDetail:function(){return K},modifyUser:function(){return W},queryUserList:function(){return z}});var T=r(15009),C=r.n(T),s=r(97857),j=r.n(s),P=r(99289),A=r.n(P),f=r(94272);function z(e,t){return L.apply(this,arguments)}function L(){return L=A()(C()().mark(function e(t,y){return C()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return console.log("options: ".concat(y)),d.abrupt("return",(0,f.request)("/api/hello",j()({method:"GET",params:j()({},t)},y||{})));case 2:case"end":return d.stop()}},e)})),L.apply(this,arguments)}function M(e,t){return V.apply(this,arguments)}function V(){return V=A()(C()().mark(function e(t,y){return C()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,f.request)("/api/v1/user",j()({method:"POST",headers:{"Content-Type":"application/json"},data:t},y||{})));case 1:case"end":return d.stop()}},e)})),V.apply(this,arguments)}function K(e,t){return h.apply(this,arguments)}function h(){return h=A()(C()().mark(function e(t,y){var p;return C()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return p=t.userId,g.abrupt("return",(0,f.request)("/api/v1/user/".concat(p),j()({method:"GET",params:j()({},t)},y||{})));case 2:case"end":return g.stop()}},e)})),h.apply(this,arguments)}function W(e,t,y){return R.apply(this,arguments)}function R(){return R=A()(C()().mark(function e(t,y,p){var d;return C()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return d=t.userId,E.abrupt("return",(0,f.request)("/api/v1/user/".concat(d),j()({method:"PUT",headers:{"Content-Type":"application/json"},params:j()({},t),data:y},p||{})));case 2:case"end":return E.stop()}},e)})),R.apply(this,arguments)}function Y(e,t){return S.apply(this,arguments)}function S(){return S=A()(C()().mark(function e(t,y){var p;return C()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return p=t.userId,g.abrupt("return",(0,f.request)("/api/v1/user/".concat(p),j()({method:"DELETE",params:j()({},t)},y||{})));case 2:case"end":return g.stop()}},e)})),S.apply(this,arguments)}var G={UserController:$}}}]);
